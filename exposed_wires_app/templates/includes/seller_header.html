<nav class="bg-primary-100 shadow-lg sticky z-50 top-0 w-full">
  <div class="p-4 max-w-7xl mx-auto flex items-center justify-between">
    
    <!-- Logo -->
    <a href="/seller/dashboard" class="text-white text-2xl font-bold font-serif">Exposed Wires</a>

    <!-- Desktop Links -->
    <div id="seller-desktop-links" class="hidden md:flex space-x-6 items-center"></div>

    <!-- Mobile Toggle -->
    <div class="md:hidden flex items-center">
      <button id="seller-menu-toggle" class="text-white focus:outline-none cursor-pointer">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" 
             stroke="currentColor" class="w-7 h-7 cursor-pointer">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div id="seller-mobile-menu"
       class="md:hidden max-h-0 overflow-hidden opacity-0 transform scale-95 transition-all duration-300 ease-in-out"></div>
</nav>

<script>
  async function getUser() {
    try {
      let res = await get_data(get_User_url); // <-- your user API endpoint
      if (!res.ok) throw new Error("Failed to load user");
        return await res.json();
    } catch (err) {
      console.error(err);
      return null;
    }
  }

  function buildLinks(user) {
    const links = [
      { href: "/seller/dashboard", label: "Dashboard" },
      { href: "/seller/manage_products", label: "My Products" },
      { href: "/seller/orders", label: "Orders" },
      { href: "/seller/reports", label: "Reports" },
      { href: "/seller/stores", label: "Stores" },
    ];

    return links;
  }

  function renderDesktop(links, user) {
    const container = document.getElementById("seller-desktop-links");
    container.innerHTML = `
      ${links.map(link => `
        <a href="${link.href}" class="text-white hover:text-gray-300 cursor-pointer">${link.label}</a>
      `).join("")}
      
      <!-- Account -->
      <a href="/seller/account">
        ${
          user?.profile_pic 
          ? `<img src="${user.profile_pic}" class="w-8 h-8 rounded-full object-cover border-2 border-white" />`
          : `<div class="w-8 h-8 flex items-center justify-center bg-accent-100 text-white rounded-full font-bold">
              ${(user?.username?.charAt(0) || "?").toUpperCase()}
            </div>`
        }
      </a>
    `;
  }

  function renderMobile(links, user) {
    const container = document.getElementById("seller-mobile-menu");
    container.innerHTML = `
      ${links.map(link => `
        <a href="${link.href}" class="block font-bold p-4 text-white hover:text-text-100 hover:bg-accent-100 cursor-pointer">${link.label}</a>
      `).join("")}
      <a href="/seller/account" class="block font-bold p-4 text-white hover:text-text-100 hover:bg-accent-100 cursor-pointer">
        ${user?.username || "Account"}
      </a>
    `;
  }

  // init
  (async () => {
    const user = await get_data(get_User_url);
    const links = buildLinks(user);
    renderDesktop(links, user);
    renderMobile(links, user);
  })();

  // Mobile menu toggle
  const sellerMenuToggle = document.getElementById('seller-menu-toggle');
  const sellerMobileMenu = document.getElementById('seller-mobile-menu');
  sellerMenuToggle.addEventListener('click', () => {
    sellerMobileMenu.classList.toggle('max-h-0');
    sellerMobileMenu.classList.toggle('opacity-0');
    sellerMobileMenu.classList.toggle('scale-95');
    sellerMobileMenu.classList.toggle('max-h-screen');
    sellerMobileMenu.classList.toggle('opacity-100');
    sellerMobileMenu.classList.toggle('scale-100');
  });
</script>
