{% extends "layout.html" %}

{% block admin_content %}
<div class="flex-1 p-8 bg-bg-100 min-h-screen">
  <h1 class="text-2xl font-bold text-text-100 mb-6">Manage Stores</h1>

  <!-- Table -->
  <div class="bg-white shadow rounded-xl overflow-hidden">
    <table class="w-full border-collapse">
      <thead class="bg-primary-100 text-white">
        <tr>
          <th class="px-4 py-3 text-left">Logo</th>
          <th class="px-4 py-3 text-left">Store Name</th>
          <th class="px-4 py-3 text-left">Seller</th>
          <th class="px-4 py-3 text-left">Products</th>
          <th class="px-4 py-3 text-left">Created</th>
          <th class="px-4 py-3 text-left">Actions</th>
        </tr>
      </thead>
      <tbody class="divide-y">
        {% for store in stores %}
          <tr class="hover:bg-gray-50 transition">
            <!-- Logo -->
            <td class="px-4 py-3">
              {% if store.logo %}
                <img src="{{ store.logo.url }}" alt="{{ store.name }}" class="w-12 h-12 rounded-lg object-cover">
              {% else %}
                <div class="w-12 h-12 bg-gray-200 flex items-center justify-center rounded-lg text-sm text-gray-500">
                  No Logo
                </div>
              {% endif %}
            </td>

            <!-- Store name -->
            <td class="px-4 py-3 font-semibold text-text-100">
              {{ store.name }}
            </td>

            <!-- Seller -->
            <td class="px-4 py-3 text-text-200">
              {{ store.seller.user.username }}
              <p class="text-sm text-gray-500">{{ store.seller.user.email }}</p>
            </td>

            <!-- Products -->
            <td class="px-4 py-3 text-center">
              {{ store.seller.products.count }}
            </td>

            <!-- Created -->
            <td class="px-4 py-3 text-gray-500">
              {{ store.created_at|date:"M d, Y" }}
            </td>

            <!-- Actions -->
            <td class="px-4 py-3 space-x-2">
              <a href="" 
                 class="px-3 py-1 bg-primary-100 text-white rounded-lg text-sm hover:bg-primary-200">
                View
              </a>
              <a href="" 
                 class="px-3 py-1 bg-yellow-500 text-white rounded-lg text-sm hover:bg-yellow-600">
                Edit
              </a>
              <form method="post" action="{% url 'admin_delete_store' store.id %}" class="inline">
                {% csrf_token %}
                <button type="submit" 
                        class="px-3 py-1 bg-red-500 text-white rounded-lg text-sm hover:bg-red-600"
                        onclick="return confirm('Are you sure you want to delete this store?');">
                  Delete
                </button>
              </form>
            </td>
          </tr>
        {% empty %}
          <tr>
            <td colspan="6" class="px-4 py-6 text-center text-gray-500">
              No stores found.
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
